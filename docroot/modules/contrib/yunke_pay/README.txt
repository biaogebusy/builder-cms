【云客支付模块yunke_pay简介】
本模块为Drupal添加中国国内最为常用的电子支付能力，V1.0版本仅支持支付宝及微信支付
计划在将来包括信用卡、数字人民币、paypal等支付渠道，开发本模块的主要目的是为了让
Drupal在中国国内能够快速搭建各种营销系统而奠定基础，促进中国Drupal社区发展

【模块安装】
由于要用到各支付渠道提供的官方SDK依赖库 所以请通过composer安装本模块,方法如下：
进入系统根目录，执行以下命令：
  composer require drupal/yunke_pay
如果你已经下载好了模块，请将模块放入模块目录后，进入系统根目录执行以下命令：
安装腾讯提供的中间件库：
composer require wechatpay/wechatpay-guzzle-middleware
安装支付宝提供的中间件库：
composer require alipaysdk/easysdk:^2.2
由于本模块依赖“云客二维码”模块（yunke_qrcode）请一并安装该模块
完成文件安装后，最后请到管理后台进行模块安装，按常规方法即可

【示例】
本模块被用于“未来很美统一收银台”发行版中，那是一个对本模块很好的使用示例

【开发方】
开发公司：未来很美（深圳）科技有限公司
公司官网：www.will-nice.com
开发者：云客
个人网站：www.indrupal.com
“未来很美”是位于中国深圳的一家专业从事Drupal相关软件开发、培训的公司，详情请
访问官网，欢迎业务洽谈

【支付宝、微信注册指导】
它们均不对个人用户提供在线支付接口能力，因此你需要法人身份，可以注册一家公司
个人用户首选推荐注册“个体工商户”，这远没有注册公司那么麻烦，成本很低，时间很快
支付宝接口申请不用支付任何费用，开发也很方便，无场景限制，申请大约一天可以完成
而微信支付比较麻烦，如果你是网站需要收银，按照官网的指导，你需要注册并认证微信
开放平台，其中认证费300，时间三天左右，但实际上你完成这些以后，会发现根本没有必
要，或开放平台根本用不上，而文档中无任何说明，此时又会引导你注册并认证公众平台
会再次缴认证费300，再次等待3天，但实际上你开始就只需要认证公众平台即可，认证完
成后才能申请微信支付的接口，而微信支付有场景限制，默认有网站支付（即原生支付）、
JS支付（用于微信浏览器内的支付）、H5支付（移动浏览器中的支付）、APP支付等，这些
支付场景并不完全互通，比如在一个场景下发起的支付，在另外一个场景下无法完成支付
而支付宝则没有这些限制，另外微信支付的扣点费率综合看要高于支付宝，因此如果你只
需要一种支付方式的情况下，建议你首选支付宝

【常见问题】
1、如果出现如下错误提示：
cURL error 60: SSL certificate problem: unable to get local issuer certificate
这是环境问题造成的，请下载cacert，地址：https://curl.haxx.se/ca/cacert.pem
修改 php.ini 并重启服务器，在php.ini中找到curl.cainfo改为文件的绝对路径，如：
curl.cainfo =c:\phpstudy\PHPTutorial\php\php-7.2.1-nts\cacert.pem

2、假设用户在PC端发起微信付款，但又放弃，随后又在移动端选择继续付款，此时会提示
“201 商户订单号重复”的错误，这是因为微信对支付场景有限制造成的，你可以引导用户在
原场景中付款，或者为每一种场景生成订单号。微信对支付场景的限制也体现在互不能用上
比如H5支付只能在移动端浏览器内使用，不能用在微信浏览器内，会提示“请在微信外打开
订单，进行支付”），也不能用在PC网页上，会跳转到空页然后跳回

